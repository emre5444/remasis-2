<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:p="http://primefaces.org/ui">
<h:body>


    <p:dialog header="#{lbl.label_yeni_anket_ekleme}" widgetVar="anketEklemePopup" closeOnEscape="true" height="500px" width="auto">
        <p:messages id="messages2" showDetail="false" autoUpdate="true" closable="true"/>
        <h:form id="AnketEkleme">

                <p:panel header="#{lbl.label_anket_bilgileri}">
                    <h:panelGrid columns="2" cellpadding="5">

                        <h:outputLabel for="anket_konu_v" value="#{lbl.label_anket_konusu} (*)"
                                       style="font-weight:bold"/>
                        <p:inputTextarea rows="3" cols="40" autoResize="false" value="#{entity.yeniAnket.anketKonusu}"
                                         label="#{lbl.label_anket_konusu}" required="true"
                                         id="anket_konu_v"/>

                        <h:outputLabel for="anket_aciklama_v" value="#{lbl.label_anket_sorusu} (*)"
                                       style="font-weight:bold"/>
                        <p:inputTextarea rows="8" cols="50" autoResize="false" value="#{entity.yeniAnket.aciklama}" required="true"
                                         label="#{lbl.label_anket_sorusu}"
                                         id="anket_aciklama_v"
                                />

                        <h:outputLabel for="rolTipi" value="#{lbl.label_anket_aktif_mi} (*)" style="font-weight:bold"/>
                        <p:selectOneMenu id="rolTipi" value="#{entity.yeniAnket.aktifMi}" required="true"
                                         style="font-weight:bold">
                            <f:selectItem itemLabel="#{lbl.seciniz}" itemValue="#{null}"/>
                            <f:selectItems value="#{entity.anketAktifPasifList}" var="apTipi" itemValue="#{apTipi}"
                                           itemLabel="#{apTipi.aciklama}"/>
                            <f:converter binding="#{evetHayirConverter}"/>
                        </p:selectOneMenu>
                    </h:panelGrid>
                </p:panel>

                <div style="height:10px"></div>


                <p:panel header="#{lbl.label_anket_soru_tanimlama_islemleri}">
                    <h:panelGrid columns="6" cellpadding="5" rendered="#{sessionInfo.adminMi and not entity.anketKullaniciDataModel.rowAvailable}">

                        <h:outputLabel for="soru" value="#{lbl.label_anket_sorusu_yeni}" style="font-weight:bold"/>
                        <p:inputText id="soru" value="#{entity.yeniAnket.yeniSecenek}" size="60"/>

                        <f:facet name="footer">
                            <p:commandButton id="btn_kullanici_daire_bul" value="#{lbl.label_anket_secenek_ekle}"
                                             update="@([id$=AnketEkleme])"
                                             actionListener="#{entity.addTempAnketSecimToAnket}"/>
                        </f:facet>

                    </h:panelGrid>

                    <div style="height:4px"></div>

                    <h:panelGrid columns="2" cellpadding="5">

                        <p:dataTable id="secenekListesiOfAnket" value="#{entity.anketSecenekDataModel}"
                                     var="varAnketSecenek"
                                     emptyMessage="#{msg.no_record_found}"
                                     selection="#{anketMB.selectedAnketSecim}"
                                     paginatorPosition="bottom" paginator="true"
                                     style="width:100%" rows="10">
                            <p:column headerText="#{lbl.label_anket_sorusu}">
                                <h:outputText value="#{varAnketSecenek.secim}"/>
                            </p:column>



                            <p:column style="width:4%" exportable="false">
                                <h:panelGrid columns="4">
                                    <p:commandButton id="deleteButton1" icon="ui-icon-trash" immediate="true"
                                                     rendered="#{sessionInfo.adminMi and not entity.anketKullaniciDataModel.rowAvailable}"
                                                     action="#{entity.deleteTempSecimToAnket}"
                                                     update="@([id$=AnketEkleme])"
                                            >
                                        <f:setPropertyActionListener value="#{varAnketSecenek}"
                                                                     target="#{entity.selectedAnketSecim}"/>
                                        <p:confirm header="#{lbl.label_anket_secim_silme}"
                                                   message="#{msg.islemi_onayliyormusunuz}"/>
                                    </p:commandButton>
                                </h:panelGrid>
                            </p:column>

                        </p:dataTable>
                    </h:panelGrid>


                </p:panel>

                <p:commandButton id="btn_anket_ekle_guncelle" value="#{lbl.ortak_kaydet}" update="@([id$=#{formName}]) :AnketEkleme"
                                 actionListener="#{entity.anketEkleDecision}">
                    <p:confirm header="#{lbl.label_anket_ekle}"
                               message="#{msg.islemi_onayliyormusunuz}"/>
                </p:commandButton>

        </h:form>
    </p:dialog>

</h:body>
</html>
